"use strict";(self.webpackChunknavigrade=self.webpackChunknavigrade||[]).push([[898],{8898:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(5043),r=a(7020),l=a(2766),n=a(8628),c=a(4282),d=a(9853),o=a(1072),i=a(8602),h=a(3401),m=a(579);const u=e=>{let{handleChildData:t,completedassignments:a=[{name:"",weight:"",grade:""}]}=e;const[r,l]=(0,s.useState)(a),[u,x]=(0,s.useState)(!1),[p,g]=(0,s.useState)([{name:"",weight:"",grade:""}]),[b,j]=(0,s.useState)([]),[y,A]=(0,s.useState)(null);(0,s.useEffect)((()=>{l(a),g([{name:"",weight:"",grade:""}]),A(null),0===a.length&&h.oR.info("No completed assignments found. Add hypothetical ones to predict.")}),[a]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.N9,{}),null!==y?(0,m.jsx)(n.A,{className:"bg-success bg-opacity-10 border-success border-opacity-50 text-white text-center p-4",children:(0,m.jsxs)(n.A.Body,{children:[(0,m.jsx)("h3",{className:"display-6 fw-bold text-success mb-3",children:"Grade Prediction"}),(0,m.jsxs)("div",{className:"display-1 fw-bold mb-0",children:[Number(y).toFixed(2),"%"]}),(0,m.jsx)("p",{className:"text-muted mt-2",children:"Based on current weights and scores"}),(0,m.jsx)(c.A,{variant:"outline-success mt-3",onClick:()=>A(null),children:"Recalculate"})]})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d.A,{noValidate:!0,validated:u,onSubmit:e=>{if(!1===e.currentTarget.checkValidity())return e.preventDefault(),e.stopPropagation(),void h.oR.error("Please fill out all fields");if(x(!0),!(()=>{let e=0;return r.forEach((t=>{""!==t.weight&&(e+=parseFloat(t.weight))})),p.forEach((t=>{""!==t.weight&&(e+=parseFloat(t.weight))})),1===e||(h.oR.error("Weights do not add up to 1.0 Current Total:"+e),x(!1),!1)})())return e.preventDefault(),void e.stopPropagation();e.preventDefault();const t=[...r,...p];j(t),(e=>{let t=0,a=0;e.forEach((e=>{e.weight&&e.grade&&(t+=parseFloat(e.weight),a+=parseFloat(e.grade)*parseFloat(e.weight))})),A(a)})(t)},children:(0,m.jsxs)(o.A,{children:[(0,m.jsxs)(i.A,{md:12,lg:6,children:[(0,m.jsx)("h5",{className:"text-secondary mb-3 border-bottom border-secondary border-opacity-25 pb-2",children:"Completed Assignments"}),r.map(((e,t)=>(0,m.jsx)(n.A,{className:"bg-dark-glass border border-secondary border-opacity-25 mb-3 text-white",children:(0,m.jsxs)(n.A.Body,{children:[(0,m.jsxs)(d.A.Group,{controlId:"assign-".concat(t),className:"mb-3",children:[(0,m.jsx)(d.A.Label,{className:"text-muted small text-uppercase",children:"Assignment Name"}),(0,m.jsx)(d.A.Control,{required:!0,type:"text",value:e.name,onChange:e=>((e,t)=>{const a=[...r];a[t].name=e.target.value,l(a)})(e,t),className:"bg-transparent text-white border-secondary border-opacity-50",readOnly:!0})]}),(0,m.jsxs)(o.A,{children:[(0,m.jsx)(i.A,{children:(0,m.jsxs)(d.A.Group,{controlId:"weight-".concat(t),children:[(0,m.jsx)(d.A.Label,{className:"text-muted small text-uppercase",children:"Weight (0-1.0)"}),(0,m.jsx)(d.A.Control,{required:!0,type:"number",step:"0.01",value:e.weight,onChange:e=>((e,t)=>{const a=[...r];a[t].weight=e.target.value,l(a)})(e,t),className:"bg-transparent text-white border-secondary border-opacity-50"})]})}),(0,m.jsx)(i.A,{children:(0,m.jsxs)(d.A.Group,{controlId:"grade-".concat(t),children:[(0,m.jsx)(d.A.Label,{className:"text-muted small text-uppercase",children:"Grade (%)"}),(0,m.jsx)(d.A.Control,{required:!0,type:"number",value:e.grade,onChange:e=>((e,t)=>{const a=[...r];a[t].grade=e.target.value,l(a)})(e,t),className:"bg-transparent text-white border-secondary border-opacity-50"})]})})]})]})},t)))]}),(0,m.jsxs)(i.A,{md:12,lg:6,children:[(0,m.jsx)("h5",{className:"text-secondary mb-3 border-bottom border-secondary border-opacity-25 pb-2",children:"Hypothetical Tests/Assignments"}),p.map(((e,t)=>(0,m.jsx)(n.A,{className:"bg-dark-glass border border-dashed border-secondary border-opacity-50 mb-3 text-white",children:(0,m.jsxs)(n.A.Body,{children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,m.jsx)("span",{className:"badge bg-info bg-opacity-20 text-info",children:"Hypothetical"}),p.length>0&&(0,m.jsx)(c.A,{variant:"link",className:"text-danger p-0",title:"Remove",onClick:()=>{const e=[...p];e.splice(t,1),g(e)},children:"x"})]}),(0,m.jsxs)(d.A.Group,{className:"mb-3",children:[(0,m.jsx)(d.A.Label,{className:"text-muted small text-uppercase",children:"Name"}),(0,m.jsx)(d.A.Control,{required:!0,type:"text",placeholder:"e.g. Final Exam",value:e.name,onChange:e=>((e,t)=>{const a=[...p];a[t].name=e.target.value,g(a)})(e,t),className:"bg-transparent text-white border-secondary border-opacity-50"})]}),(0,m.jsxs)(o.A,{children:[(0,m.jsx)(i.A,{children:(0,m.jsxs)(d.A.Group,{children:[(0,m.jsx)(d.A.Label,{className:"text-muted small text-uppercase",children:"Weight"}),(0,m.jsx)(d.A.Control,{required:!0,type:"number",step:"0.01",placeholder:"0.2",value:e.weight,onChange:e=>((e,t)=>{const a=[...p];a[t].weight=e.target.value,g(a)})(e,t),className:"bg-transparent text-white border-secondary border-opacity-50"})]})}),(0,m.jsx)(i.A,{children:(0,m.jsxs)(d.A.Group,{children:[(0,m.jsx)(d.A.Label,{className:"text-muted small text-uppercase",children:"Est. Grade"}),(0,m.jsx)(d.A.Control,{required:!0,type:"number",placeholder:"95",value:e.grade,onChange:e=>((e,t)=>{const a=[...p];a[t].grade=e.target.value,g(a)})(e,t),className:"bg-transparent text-white border-secondary border-opacity-50"})]})})]})]})},"test-".concat(t)))),(0,m.jsxs)("div",{className:"d-grid gap-2",children:[(0,m.jsx)(c.A,{variant:"outline-info",onClick:()=>{const e=[...p,{name:"",weight:"",grade:""}];g(e)},className:"border-dashed",children:"+ Add Hypothetical Assignment"}),(0,m.jsx)(c.A,{variant:"primary",type:"submit",className:"mt-3 py-2 fw-bold",children:"Calculate Final Prediction"})]})]})]})})})]})},x=()=>{const{getAuthToken:e,user:t,userDetails:a}=(0,l.A)(),[n,h]=(0,s.useState)([]),[x,p]=(0,s.useState)([]),[g,b]=(0,s.useState)(null),[j,y]=(0,s.useState)([]),[A,N]=(0,s.useState)(null),[v,f]=(0,s.useState)(!0),[w,C]=(0,s.useState)(null),[S,k]=(0,s.useState)(null);r.A.defaults.headers.common.Authorization="Bearer ".concat(e());const E=JSON.parse(a);(0,s.useEffect)((()=>{(async()=>{try{const e="http://localhost:5050",t=(await r.A.get("".concat(e,"/courses/student/").concat(E._id))).data;y(t)}catch(w){console.error("Error:",w)}})()}),[]),(0,s.useEffect)((()=>{A&&(async e=>{try{const t=E._id,a=e,s=await r.A.get("".concat("http://localhost:5050","/grades/estimate-grades/").concat(t,"/").concat(a)),l=s.data;p(l),b(s.data),C(null),f(!1)}catch(w){f(!1),C("Error fetching estimated grade. Message: Do you have any Assignments for this course?"),console.error("Error fetching estimated grade:",w.message)}})(A)}),[A]);return(0,m.jsxs)("div",{className:"dashboard-container",children:[(0,m.jsxs)("div",{className:"glass-panel p-4 mb-4 text-center",children:[(0,m.jsx)("h2",{className:"display-6 fw-bold mb-0",children:"My Grades"}),(0,m.jsx)("p",{className:"text-muted mt-2 mb-0",children:"Track your performance and predict your final score"})]}),(0,m.jsx)(o.A,{className:"justify-content-center",children:(0,m.jsx)(i.A,{md:10,lg:12,children:(0,m.jsxs)("div",{className:"glass-panel p-4 mb-4",children:[(0,m.jsx)(d.A.Label,{className:"text-muted text-uppercase small ls-1",children:"Select Course"}),(0,m.jsxs)(d.A.Select,{id:"course-select",className:"bg-dark-glass text-white border-secondary border-opacity-25 mb-3",onChange:e=>N((()=>""!==e.target.value?e.target.value:null)),children:[(0,m.jsx)("option",{value:"",className:"text-dark",children:"Select a course to view..."}),j.map((e=>(0,m.jsx)("option",{value:e._id,className:"text-dark",children:e.name},e._id)))]}),(0,m.jsx)(c.A,{variant:"outline-primary",className:"w-100",onClick:()=>{h([]),p([]),b(null),N(null),f(!0),C(null),k(null),document.getElementById("course-select")&&(document.getElementById("course-select").selectedIndex=0)},children:"Reset Selection"})]})})}),(0,m.jsx)(o.A,{className:"justify-content-center",children:(0,m.jsx)(i.A,{md:12,children:v&&!A?(0,m.jsxs)("div",{className:"text-center text-muted py-5",children:[(0,m.jsx)("div",{style:{fontSize:"3rem",opacity:.3},children:"\ud83c\udf93"}),(0,m.jsx)("p",{className:"mt-3",children:"Select a course above to get started."})]}):v?(0,m.jsxs)("div",{className:"text-center py-5",children:[(0,m.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status"}),(0,m.jsx)("p",{children:"Loading course data..."})]}):w?(0,m.jsx)("div",{className:"text-center text-danger glass-panel p-4",children:w}):(0,m.jsx)(m.Fragment,{children:x?(0,m.jsx)("div",{className:"glass-panel p-4",children:(0,m.jsx)(u,{completedassignments:x,handleChildData:e=>{(()=>{let t=0,a=0;e.forEach((e=>{t+=e.weight,a+=e.grade*e.weight}));k(a/t)})()}})}):(0,m.jsx)("div",{className:"glass-panel p-5 text-center",children:(0,m.jsx)("p",{className:"text-muted",children:"No completed assignments found for this course."})})})})})]})}}}]);
//# sourceMappingURL=898.04fba5fe.chunk.js.map