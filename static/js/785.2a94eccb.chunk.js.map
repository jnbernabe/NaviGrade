{"version":3,"file":"static/js/785.2a94eccb.chunk.js","mappings":"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","sources":["pages/Calendar/Calendar.js","pages/Calendar/CalendarContainer.js","webpack://navigrade/./src/pages/Calendar/Calendar.css?967f"],"sourcesContent":["//Calendar.js\r\nimport React, {useState} from 'react';\r\nimport { \r\n  Calendar as BigCalendar,\r\n  dateFnsLocalizer,\r\n  CalendarProps\r\n} from 'react-big-calendar';\r\nimport format from 'date-fns/format';\r\nimport parse from 'date-fns/parse';\r\nimport startOfWeek from 'date-fns/startOfWeek';\r\nimport getDay from 'date-fns/getDay';\r\nimport DatePicker from 'react-datepicker';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\n//css files\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nrequire('./Calendar.css')\r\n\r\n\r\nconst locales = {\r\n  'en-CA': require('date-fns/locale/en-CA'),\r\n};\r\nconst localizer = dateFnsLocalizer({\r\n  format,\r\n  parse,\r\n  startOfWeek,\r\n  getDay,\r\n  locales\r\n}); \r\n\r\nconst getDayOfWeek = dayAbbr => {\r\n  const days = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\n  // Handle full names just in case (e.g., 'Monday') and short names ('Mon')\r\n  const d = dayAbbr.toLowerCase().slice(0, 3);\r\n  return days.indexOf(d);\r\n};\r\n\r\nconst MyCalendar = ({ courses = [], assignments = [], height = \"700px\" }) => {\r\n  // Map course schedules to events\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n\r\n  const handleEventClick = event => {\r\n    setSelectedEvent(event);\r\n  };\r\n  \r\n  const handleCloseModal = () => {\r\n    setSelectedEvent(null);\r\n  };\r\n  \r\n  // Create a map of course colors for easy lookup\r\n  const courseColors = {};\r\n  courses.forEach(c => {\r\n      courseColors[c._id] = c.color;\r\n  });\r\n\r\n  // Generate Course Events\r\n  let events = courses.flatMap(course => {\r\n    const courseEvents = [];\r\n    if (!course.schedules) return [];\r\n\r\n    course.schedules.forEach(schedule => {\r\n      const startDate = new Date(course.startDate);\r\n      const endDate = new Date(course.endDate);\r\n      let currentDate = startDate;\r\n      \r\n      // Parse days (e.g. \"Mon, Wed\" or \"Monday\")\r\n      const days = schedule.day ? schedule.day.split(',').map(d => d.trim()) : [];\r\n      const targetDayIndices = days.map(getDayOfWeek).filter(idx => idx !== -1);\r\n\r\n      while (currentDate <= endDate) {\r\n        const scheduleDay = new Date(currentDate);\r\n        scheduleDay.setHours(0, 0, 0, 0);\r\n\r\n        if (targetDayIndices.includes(scheduleDay.getDay())) {\r\n          const startTimeParts = schedule.startTime.split(':').map(part => parseInt(part, 10));\r\n          const endTimeParts = schedule.endTime.split(':').map(part => parseInt(part, 10));\r\n\r\n          const startDateTime = new Date(scheduleDay);\r\n          startDateTime.setHours(startTimeParts[0], startTimeParts[1]);\r\n\r\n          const endDateTime = new Date(scheduleDay);\r\n          endDateTime.setHours(endTimeParts[0], endTimeParts[1]);\r\n\r\n          courseEvents.push({\r\n            id: `${course._id}_${startDateTime.getTime()}`,\r\n            title: course.name,\r\n            start: startDateTime,\r\n            end: endDateTime,\r\n            type: 'course',\r\n            desc: `Class: ${course.name} (${course.professor})`,\r\n            color: course.color || '#8b5cf6' // Use course color or default violet\r\n          });\r\n        }\r\n        currentDate.setDate(currentDate.getDate() + 1);\r\n      }\r\n    });\r\n\r\n    return courseEvents;\r\n  });\r\n\r\n  // Generate Assignment Events\r\n  if (assignments && assignments.length > 0) {\r\n    const assignmentEvents = assignments.map((assignment) => {\r\n      const duedate = new Date(assignment.dueDate);\r\n      \r\n      return {\r\n        id: assignment._id,\r\n        title: `DUE: ${assignment.name}`,\r\n        start: duedate,\r\n        end: duedate,\r\n        allDay: true,\r\n        type: 'assignment',\r\n        desc: `Assignment Due: ${assignment.name}`,\r\n        color: '#f59e0b' // Fixed Orange for all assignments to be distinct from Courses\r\n      };\r\n    });\r\n    events = [...events, ...assignmentEvents];\r\n  }\r\n\r\n  // Custom Event Styling\r\n  const eventStyleGetter = (event, start, end, isSelected) => {\r\n    let style = {\r\n      border: 'none',\r\n      borderRadius: '4px',\r\n      opacity: 0.9,\r\n      color: 'white',\r\n      display: 'block',\r\n      backgroundColor: event.color,\r\n      fontSize: '0.75rem', // Smaller font\r\n      padding: '1px 4px', // Compact padding\r\n      lineHeight: '1.2'\r\n    };\r\n\r\n    if (event.type === 'assignment') {\r\n      style.borderLeft = '3px solid #b45309'; // Darker orange border\r\n      style.fontWeight = '600';\r\n    } else {\r\n        // Course events\r\n        style.opacity = 0.85;\r\n    }\r\n\r\n    return {\r\n      style: style\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div style={{height: height}} className=\"p-3\">\r\n    <BigCalendar \r\n      defaultView='month' \r\n      localizer={localizer} \r\n      events={events} \r\n      startAccessor=\"start\" \r\n      endAccessor=\"end\" \r\n      locales={locales}\r\n      onSelectEvent={handleEventClick}\r\n      eventPropGetter={eventStyleGetter}\r\n      popup\r\n      />\r\n      \r\n      {selectedEvent && (\r\n        <Modal show={true} onHide={handleCloseModal} centered contentClassName=\"glass-modal\">\r\n          <Modal.Header closeButton closeVariant=\"white\">\r\n            <Modal.Title>{selectedEvent.title}</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <p className=\"fs-5\">{selectedEvent.desc}</p>\r\n            <p className=\"text-muted\">\r\n              {selectedEvent.allDay \r\n                ? format(selectedEvent.start, 'PPPP') \r\n                : `${format(selectedEvent.start, 'PPPP p')} - ${format(selectedEvent.end, 'p')}`\r\n              }\r\n            </p>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"primary\" onClick={handleCloseModal}>\r\n              Close\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyCalendar;","//CalendarContainer.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Calendar from \"./Calendar\";\r\nimport axios from \"../../services/mockApi\";\r\nimport { useAuth, AuthProvider } from \"../../contexts/AuthContext\";\r\n\r\nconst CalendarContainer = () => {\r\n  const [courses, setCourses] = useState([]);\r\n  const [assignments, setAssignments] = useState([]);\r\n  const { getAuthToken } = useAuth();\r\n  const { user, userDetails } = useAuth(AuthProvider);\r\n  axios.defaults.headers.common[\"Authorization\"] = `Bearer ${getAuthToken()}`;\r\n\r\n  const userInfo = JSON.parse(userDetails);\r\n  useEffect(() => {\r\n    fetchCourses();\r\n    fetchAssignments();\r\n  }, []);\r\n\r\n  const fetchCourses = async () => {\r\n    try {\r\n      const apiKey = process.env.REACT_APP_API_KEY;\r\n      const response = await axios.get(\r\n        `${apiKey}/courses/student/${userInfo._id}`\r\n      );\r\n      const fetchedCourses = response.data;\r\n      setCourses(fetchedCourses);\r\n    } catch (error) {\r\n      console.error(\"Error fetching courses:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchAssignments = async () => {\r\n    try {\r\n      const apiKey = process.env.REACT_APP_API_KEY;\r\n      const response = await axios.get(\r\n        `${apiKey}/assignments/student/${userInfo._id}`\r\n      );\r\n      const fetchedAssignments = response.data;\r\n      setAssignments(fetchedAssignments);\r\n    } catch (error) {\r\n      console.error(\"Error fetching assignments:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Course Calendar</h1>\r\n      <Calendar courses={courses} assignments={assignments} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalendarContainer;\r\n","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["require","locales","localizer","dateFnsLocalizer","format","parse","startOfWeek","getDay","getDayOfWeek","dayAbbr","d","toLowerCase","slice","indexOf","_ref","courses","assignments","height","selectedEvent","setSelectedEvent","useState","handleCloseModal","courseColors","forEach","c","_id","color","events","flatMap","course","courseEvents","schedules","schedule","startDate","Date","endDate","currentDate","targetDayIndices","day","split","map","trim","filter","idx","scheduleDay","setHours","includes","startTimeParts","startTime","part","parseInt","endTimeParts","endTime","startDateTime","endDateTime","push","id","concat","getTime","title","name","start","end","type","desc","professor","setDate","getDate","length","assignmentEvents","assignment","duedate","dueDate","allDay","_jsxs","style","className","children","_jsx","BigCalendar","defaultView","startAccessor","endAccessor","onSelectEvent","event","eventPropGetter","eventStyleGetter","isSelected","border","borderRadius","opacity","display","backgroundColor","fontSize","padding","lineHeight","borderLeft","fontWeight","popup","Modal","show","onHide","centered","contentClassName","Header","closeButton","closeVariant","Title","Body","Footer","Button","variant","onClick","CalendarContainer","setCourses","setAssignments","getAuthToken","useAuth","user","userDetails","AuthProvider","axios","defaults","headers","common","userInfo","JSON","useEffect","fetchCourses","fetchAssignments","async","apiKey","process","fetchedCourses","get","data","error","console","fetchedAssignments","Calendar"],"sourceRoot":""}