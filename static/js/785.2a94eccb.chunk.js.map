{"version":3,"file":"static/js/785.2a94eccb.chunk.js","mappings":"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","sources":["pages/Calendar/Calendar.js","pages/Calendar/CalendarContainer.js","webpack://navigrade/./src/pages/Calendar/Calendar.css?967f"],"sourcesContent":["//Calendar.js\nimport React, {useState} from 'react';\nimport { \n  Calendar as BigCalendar,\n  dateFnsLocalizer,\n  CalendarProps\n} from 'react-big-calendar';\nimport format from 'date-fns/format';\nimport parse from 'date-fns/parse';\nimport startOfWeek from 'date-fns/startOfWeek';\nimport getDay from 'date-fns/getDay';\nimport DatePicker from 'react-datepicker';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\n\n//css files\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nrequire('./Calendar.css')\n\n\nconst locales = {\n  'en-CA': require('date-fns/locale/en-CA'),\n};\nconst localizer = dateFnsLocalizer({\n  format,\n  parse,\n  startOfWeek,\n  getDay,\n  locales\n}); \n\nconst getDayOfWeek = dayAbbr => {\n  const days = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n  // Handle full names just in case (e.g., 'Monday') and short names ('Mon')\n  const d = dayAbbr.toLowerCase().slice(0, 3);\n  return days.indexOf(d);\n};\n\nconst MyCalendar = ({ courses = [], assignments = [], height = \"700px\" }) => {\n  // Map course schedules to events\n  const [selectedEvent, setSelectedEvent] = useState(null);\n\n  const handleEventClick = event => {\n    setSelectedEvent(event);\n  };\n  \n  const handleCloseModal = () => {\n    setSelectedEvent(null);\n  };\n  \n  // Create a map of course colors for easy lookup\n  const courseColors = {};\n  courses.forEach(c => {\n      courseColors[c._id] = c.color;\n  });\n\n  // Generate Course Events\n  let events = courses.flatMap(course => {\n    const courseEvents = [];\n    if (!course.schedules) return [];\n\n    course.schedules.forEach(schedule => {\n      const startDate = new Date(course.startDate);\n      const endDate = new Date(course.endDate);\n      let currentDate = startDate;\n      \n      // Parse days (e.g. \"Mon, Wed\" or \"Monday\")\n      const days = schedule.day ? schedule.day.split(',').map(d => d.trim()) : [];\n      const targetDayIndices = days.map(getDayOfWeek).filter(idx => idx !== -1);\n\n      while (currentDate <= endDate) {\n        const scheduleDay = new Date(currentDate);\n        scheduleDay.setHours(0, 0, 0, 0);\n\n        if (targetDayIndices.includes(scheduleDay.getDay())) {\n          const startTimeParts = schedule.startTime.split(':').map(part => parseInt(part, 10));\n          const endTimeParts = schedule.endTime.split(':').map(part => parseInt(part, 10));\n\n          const startDateTime = new Date(scheduleDay);\n          startDateTime.setHours(startTimeParts[0], startTimeParts[1]);\n\n          const endDateTime = new Date(scheduleDay);\n          endDateTime.setHours(endTimeParts[0], endTimeParts[1]);\n\n          courseEvents.push({\n            id: `${course._id}_${startDateTime.getTime()}`,\n            title: course.name,\n            start: startDateTime,\n            end: endDateTime,\n            type: 'course',\n            desc: `Class: ${course.name} (${course.professor})`,\n            color: course.color || '#8b5cf6' // Use course color or default violet\n          });\n        }\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n    });\n\n    return courseEvents;\n  });\n\n  // Generate Assignment Events\n  if (assignments && assignments.length > 0) {\n    const assignmentEvents = assignments.map((assignment) => {\n      const duedate = new Date(assignment.dueDate);\n      \n      return {\n        id: assignment._id,\n        title: `DUE: ${assignment.name}`,\n        start: duedate,\n        end: duedate,\n        allDay: true,\n        type: 'assignment',\n        desc: `Assignment Due: ${assignment.name}`,\n        color: '#f59e0b' // Fixed Orange for all assignments to be distinct from Courses\n      };\n    });\n    events = [...events, ...assignmentEvents];\n  }\n\n  // Custom Event Styling\n  const eventStyleGetter = (event, start, end, isSelected) => {\n    let style = {\n      border: 'none',\n      borderRadius: '4px',\n      opacity: 0.9,\n      color: 'white',\n      display: 'block',\n      backgroundColor: event.color,\n      fontSize: '0.75rem', // Smaller font\n      padding: '1px 4px', // Compact padding\n      lineHeight: '1.2'\n    };\n\n    if (event.type === 'assignment') {\n      style.borderLeft = '3px solid #b45309'; // Darker orange border\n      style.fontWeight = '600';\n    } else {\n        // Course events\n        style.opacity = 0.85;\n    }\n\n    return {\n      style: style\n    };\n  };\n\n  return (\n    <div style={{height: height}} className=\"p-3\">\n    <BigCalendar \n      defaultView='month' \n      localizer={localizer} \n      events={events} \n      startAccessor=\"start\" \n      endAccessor=\"end\" \n      locales={locales}\n      onSelectEvent={handleEventClick}\n      eventPropGetter={eventStyleGetter}\n      popup\n      />\n      \n      {selectedEvent && (\n        <Modal show={true} onHide={handleCloseModal} centered contentClassName=\"glass-modal\">\n          <Modal.Header closeButton closeVariant=\"white\">\n            <Modal.Title>{selectedEvent.title}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <p className=\"fs-5\">{selectedEvent.desc}</p>\n            <p className=\"text-muted\">\n              {selectedEvent.allDay \n                ? format(selectedEvent.start, 'PPPP') \n                : `${format(selectedEvent.start, 'PPPP p')} - ${format(selectedEvent.end, 'p')}`\n              }\n            </p>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"primary\" onClick={handleCloseModal}>\n              Close\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default MyCalendar;","//CalendarContainer.js\nimport React, { useState, useEffect } from \"react\";\nimport Calendar from \"./Calendar\";\nimport axios from \"../../services/mockApi\";\nimport { useAuth, AuthProvider } from \"../../contexts/AuthContext\";\n\nconst CalendarContainer = () => {\n  const [courses, setCourses] = useState([]);\n  const [assignments, setAssignments] = useState([]);\n  const { getAuthToken } = useAuth();\n  const { user, userDetails } = useAuth(AuthProvider);\n  axios.defaults.headers.common[\"Authorization\"] = `Bearer ${getAuthToken()}`;\n\n  const userInfo = JSON.parse(userDetails);\n  useEffect(() => {\n    fetchCourses();\n    fetchAssignments();\n  }, []);\n\n  const fetchCourses = async () => {\n    try {\n      const apiKey = process.env.REACT_APP_API_KEY;\n      const response = await axios.get(\n        `${apiKey}/courses/student/${userInfo._id}`\n      );\n      const fetchedCourses = response.data;\n      setCourses(fetchedCourses);\n    } catch (error) {\n      console.error(\"Error fetching courses:\", error);\n    }\n  };\n\n  const fetchAssignments = async () => {\n    try {\n      const apiKey = process.env.REACT_APP_API_KEY;\n      const response = await axios.get(\n        `${apiKey}/assignments/student/${userInfo._id}`\n      );\n      const fetchedAssignments = response.data;\n      setAssignments(fetchedAssignments);\n    } catch (error) {\n      console.error(\"Error fetching assignments:\", error);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Course Calendar</h1>\n      <Calendar courses={courses} assignments={assignments} />\n    </div>\n  );\n};\n\nexport default CalendarContainer;\n","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["require","locales","localizer","dateFnsLocalizer","format","parse","startOfWeek","getDay","getDayOfWeek","dayAbbr","d","toLowerCase","slice","indexOf","_ref","courses","assignments","height","selectedEvent","setSelectedEvent","useState","handleCloseModal","courseColors","forEach","c","_id","color","events","flatMap","course","courseEvents","schedules","schedule","startDate","Date","endDate","currentDate","targetDayIndices","day","split","map","trim","filter","idx","scheduleDay","setHours","includes","startTimeParts","startTime","part","parseInt","endTimeParts","endTime","startDateTime","endDateTime","push","id","concat","getTime","title","name","start","end","type","desc","professor","setDate","getDate","length","assignmentEvents","assignment","duedate","dueDate","allDay","_jsxs","style","className","children","_jsx","BigCalendar","defaultView","startAccessor","endAccessor","onSelectEvent","event","eventPropGetter","eventStyleGetter","isSelected","border","borderRadius","opacity","display","backgroundColor","fontSize","padding","lineHeight","borderLeft","fontWeight","popup","Modal","show","onHide","centered","contentClassName","Header","closeButton","closeVariant","Title","Body","Footer","Button","variant","onClick","CalendarContainer","setCourses","setAssignments","getAuthToken","useAuth","user","userDetails","AuthProvider","axios","defaults","headers","common","userInfo","JSON","useEffect","fetchCourses","fetchAssignments","async","apiKey","process","fetchedCourses","get","data","error","console","fetchedAssignments","Calendar"],"sourceRoot":""}