"use strict";(self.webpackChunknavigrade=self.webpackChunknavigrade||[]).push([[533],{9841:(e,t,s)=>{s.d(t,{A:()=>x});var a=s(5043),n=s(3679),r=s(2078),c=s(1551),o=s(6215),i=s(7946),l=s(989),d=s(4282),m=(s(3656),s(579));s(4345);const h={"en-CA":s(8057)},u=(0,n.Hz)({format:r.Ay,parse:c.Ay,startOfWeek:o.A,getDay:i.A,locales:h}),p=e=>{const t=e.toLowerCase().slice(0,3);return["sun","mon","tue","wed","thu","fri","sat"].indexOf(t)},x=e=>{let{courses:t=[],assignments:s=[],height:c="700px"}=e;const[o,i]=(0,a.useState)(null),x=()=>{i(null)},g={};t.forEach((e=>{g[e._id]=e.color}));let y=t.flatMap((e=>{const t=[];return e.schedules?(e.schedules.forEach((s=>{const a=new Date(e.startDate),n=new Date(e.endDate);let r=a;const c=(s.day?s.day.split(",").map((e=>e.trim())):[]).map(p).filter((e=>-1!==e));for(;r<=n;){const a=new Date(r);if(a.setHours(0,0,0,0),c.includes(a.getDay())){const n=s.startTime.split(":").map((e=>parseInt(e,10))),r=s.endTime.split(":").map((e=>parseInt(e,10))),c=new Date(a);c.setHours(n[0],n[1]);const o=new Date(a);o.setHours(r[0],r[1]),t.push({id:"".concat(e._id,"_").concat(c.getTime()),title:e.name,start:c,end:o,type:"course",desc:"Class: ".concat(e.name," (").concat(e.professor,")"),color:e.color||"#8b5cf6"})}r.setDate(r.getDate()+1)}})),t):[]}));if(s&&s.length>0){const e=s.map((e=>{const t=new Date(e.dueDate);return{id:e._id,title:"DUE: ".concat(e.name),start:t,end:t,allDay:!0,type:"assignment",desc:"Assignment Due: ".concat(e.name),color:"#f59e0b"}}));y=[...y,...e]}return(0,m.jsxs)("div",{style:{height:c},className:"p-3",children:[(0,m.jsx)(n.Vv,{defaultView:"month",localizer:u,events:y,startAccessor:"start",endAccessor:"end",locales:h,onSelectEvent:e=>{i(e)},eventPropGetter:(e,t,s,a)=>{let n={border:"none",borderRadius:"4px",opacity:.9,color:"white",display:"block",backgroundColor:e.color,fontSize:"0.75rem",padding:"1px 4px",lineHeight:"1.2"};return"assignment"===e.type?(n.borderLeft="3px solid #b45309",n.fontWeight="600"):n.opacity=.85,{style:n}},popup:!0}),o&&(0,m.jsxs)(l.A,{show:!0,onHide:x,centered:!0,contentClassName:"glass-modal",children:[(0,m.jsx)(l.A.Header,{closeButton:!0,closeVariant:"white",children:(0,m.jsx)(l.A.Title,{children:o.title})}),(0,m.jsxs)(l.A.Body,{children:[(0,m.jsx)("p",{className:"fs-5",children:o.desc}),(0,m.jsx)("p",{className:"text-muted",children:o.allDay?(0,r.Ay)(o.start,"PPPP"):"".concat((0,r.Ay)(o.start,"PPPP p")," - ").concat((0,r.Ay)(o.end,"p"))})]}),(0,m.jsx)(l.A.Footer,{children:(0,m.jsx)(d.A,{variant:"primary",onClick:x,children:"Close"})})]})]})}},7043:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(9379),n=s(5043),r=s(7020),c=s(4282),o=s(8628),i=s(2766),l=s(3401),d=(s(2342),s(1187)),m=s(628),h=s(9841),u=s(579);const p=()=>{const[e,t]=(0,n.useState)([]),[s,p]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),{getAuthToken:y}=(0,i.A)(),{user:f,userDetails:D}=(0,i.A)(i.O),A=JSON.parse(D);r.A.defaults.headers.common.Authorization="Bearer ".concat(y()),(0,n.useEffect)((()=>{j()}),[]);const j=async()=>{try{const e="http://localhost:5050",s=(await r.A.get("".concat(e,"/assignments/student/").concat(A._id))).data;g(s);const n=[...await Promise.all(s.filter((e=>!e.completed)).map((async t=>{const s=(await r.A.get("".concat(e,"/courses/").concat(t.course))).name;return(0,a.A)((0,a.A)({},t),{},{course:s})})))].sort(((e,t)=>new Date(e.dueDate)-new Date(t.dueDate)));t(n)}catch(e){console.error("Error:",e)}};return(0,u.jsx)("div",{className:"dashboard-container mx-auto",children:(0,u.jsxs)("div",{id:"cssportal-grid",children:[(0,u.jsxs)("div",{id:"div1",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center gap-2 pe-4 border-end border-secondary border-opacity-25",style:{minWidth:"220px"},children:[(0,u.jsx)("div",{className:"rounded-circle bg-primary bg-opacity-10 p-2 d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:(0,u.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udc4b"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-muted small text-uppercase",style:{fontSize:"0.65rem",letterSpacing:"1px"},children:(()=>{const e=(new Date).getHours();return e<12?"Good Morning":e<18?"Good Afternoon":"Good Evening"})()}),(0,u.jsx)("div",{className:"fw-bold text-white lh-1",children:A.firstName})]})]}),(0,u.jsx)("div",{className:"flex-grow-1 px-4",children:(0,u.jsx)(m.A,{assignments:x})}),(0,u.jsxs)("div",{className:"d-flex gap-2 ps-4 border-start border-secondary border-opacity-25",children:[(0,u.jsx)(c.A,{size:"sm",variant:"outline-light",className:"border-opacity-25 text-muted hover-white",onClick:()=>{if(0===e.length)return void(0,l.oR)("No assignments currently.");const t=[...e].sort(((e,t)=>new Date(e.dueDate)-new Date(t.dueDate)))[0],s=new Date,a=new Date(t.dueDate)-s,n=Math.ceil(a/864e5);(0,l.oR)("Closest assignment: ".concat(t.name,"  \n    ").concat(n," day(s) left"))},style:{fontSize:"0.8rem"},children:"Next Due"}),(0,u.jsx)(l.N9,{theme:"dark"}),(0,u.jsx)(c.A,{size:"sm",variant:"primary",onClick:async()=>{try{const t=[...e].sort(((e,t)=>new Date(e.dueDate)-new Date(t.dueDate)));0==t.length&&(0,l.oR)("You do not have any assignment");const s=t[0],a=new Date,n=new Date(s.dueDate),c=n-a,o=Math.ceil(c/864e5),i=A.email,d="http://localhost:5050";await r.A.post("".concat(d,"/email/sendEmail"),{closestAssignment:s,diffDays:o,userEmail:i});console.log("dueDate",n),console.log("Email sent"),(0,l.oR)("Email sent")}catch(t){console.error("Error sending email:",t)}},style:{fontSize:"0.8rem",padding:"0.25rem 0.75rem"},children:"Reminder"})]})]}),(0,u.jsxs)("div",{id:"div2",className:"glass-panel",children:[(0,u.jsx)("h4",{children:"Assignment(s)"}),0===e.length?(0,u.jsx)("p",{children:"No assignments currently."}):(0,u.jsx)("div",{className:"assignment-list",children:e.map((e=>(0,u.jsx)(o.A,{className:"assignment-card",bsPrefix:"card",children:(0,u.jsx)(d.A,{assignment:e,studentId:A._id})},e._id)))})]}),(0,u.jsxs)("div",{id:"div3",className:"text-center",children:[(0,u.jsx)("h4",{children:"Assignment Calendar"}),(0,u.jsx)(h.A,{courses:s,assignments:x,height:"600px"})]})]})})}},4345:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});const a={}}}]);
//# sourceMappingURL=533.645480ae.chunk.js.map